<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZL Futures Intelligence | Quantitative Forecasting</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Annotation Plugin for confidence bands if needed, though we might just use fill -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
</head>
<body>
    <div class="app-container">
        <header class="main-header">
            <div class="logo-section">
                <div class="logo-icon"><i class="fa-solid fa-chart-line"></i></div>
                <h1>ZL <span class="highlight">Quant</span> Intelligence</h1>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <span class="label">ZL=F Price</span>
                    <span class="value" id="header-price">--.--</span>
                    <span class="change" id="header-change">--%</span>
                </div>
                <div class="status-item">
                    <span class="label">Market State</span>
                    <span class="value" id="market-state">CLOSED</span>
                </div>
                <div class="status-item">
                    <span class="label">Last Update</span>
                    <span class="value" id="last-update">--:--</span>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <button class="nav-tab active" data-tab="forecasting">
                <i class="fa-solid fa-chart-area"></i> Forecasting
            </button>
            <button class="nav-tab" data-tab="tariffs">
                <i class="fa-solid fa-gavel"></i> Tariffs
            </button>
            <button class="nav-tab" data-tab="legislation">
                <i class="fa-solid fa-scale-balanced"></i> Legislation
            </button>
            <button class="nav-tab" data-tab="relations">
                <i class="fa-solid fa-handshake"></i> Relations
            </button>
            <button class="nav-tab" data-tab="sentiment">
                <i class="fa-solid fa-newspaper"></i> Sentiment
            </button>
        </nav>

        <main class="content-area">
            <!-- Forecasting Tab -->
            <section id="forecasting" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="chart-container glass-panel">
                        <div class="panel-header">
                            <h2>Price Forecast & Confidence Bands</h2>
                            <div class="controls">
                                <select id="forecast-horizon" class="glass-select">
                                    <option value="1w">1 Week</option>
                                    <option value="1m">1 Month</option>
                                    <option value="3m" selected>3 Months</option>
                                    <option value="6m">6 Months</option>
                                    <option value="12m">12 Months</option>
                                </select>
                                <select id="forecast-model" class="glass-select">
                                    <option value="ensemble">ML Ensemble (Best)</option>
                                    <option value="arima">ARIMA</option>
                                    <option value="ema">EMA</option>
                                    <option value="sma">SMA</option>
                                </select>
                            </div>
                        </div>
                        <div class="canvas-wrapper">
                            <canvas id="priceChart"></canvas>
                        </div>
                    </div>

                    <div class="stats-panel glass-panel">
                        <h3>Model Statistics</h3>
                        <div class="stat-grid">
                            <div class="stat-card">
                                <span class="stat-label">Volatility (30D)</span>
                                <span class="stat-value" id="stat-volatility">--%</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Sharpe Ratio</span>
                                <span class="stat-value" id="stat-sharpe">--</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Max Drawdown</span>
                                <span class="stat-value" id="stat-drawdown">--%</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Prediction Conf.</span>
                                <span class="stat-value" id="stat-confidence">--%</span>
                            </div>
                        </div>
                    </div>

                    <div class="indicators-panel glass-panel">
                        <h3>Economic Indicators (FRED)</h3>
                        <div class="indicator-list" id="fred-indicators">
                            <!-- Populated by JS -->
                            <div class="loading-spinner"><i class="fa-solid fa-circle-notch fa-spin"></i> Loading FRED Data...</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tariffs Tab -->
            <section id="tariffs" class="tab-content">
                <div class="dashboard-grid gauges-grid">
                    <div class="gauge-card glass-panel">
                        <h3>Import Tariff Impact</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-import-tariff"></canvas></div>
                        <div class="shap-explainer" id="shap-import-tariff">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Avg Rate: <span id="val-import-tariff">--%</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Export Restrictions</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-export-restriction"></canvas></div>
                        <div class="shap-explainer" id="shap-export-restriction">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Prob: <span id="val-export-restriction">--%</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Trade Barrier Index</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-trade-barrier"></canvas></div>
                        <div class="shap-explainer" id="shap-trade-barrier">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Score: <span id="val-trade-barrier">--</span></div>
                    </div>
                </div>
            </section>

            <!-- Legislation Tab -->
            <section id="legislation" class="tab-content">
                <div class="dashboard-grid gauges-grid">
                    <div class="gauge-card glass-panel">
                        <h3>Farm Bill Strength</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-farm-bill"></canvas></div>
                        <div class="shap-explainer" id="shap-farm-bill">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Impact: <span id="val-farm-bill">--</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Subsidy Probability</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-subsidy"></canvas></div>
                        <div class="shap-explainer" id="shap-subsidy">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Prob: <span id="val-subsidy">--%</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Regulatory Burden</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-regulatory"></canvas></div>
                        <div class="shap-explainer" id="shap-regulatory">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Index: <span id="val-regulatory">--</span></div>
                    </div>
                </div>
                <div class="glass-panel full-width">
                    <h3>Active Agricultural Legislation (Congress.gov)</h3>
                    <div id="legislation-list" class="data-list">
                        <div class="loading-spinner"><i class="fa-solid fa-circle-notch fa-spin"></i> Loading Legislation...</div>
                    </div>
                </div>
            </section>

            <!-- Relations Tab -->
            <section id="relations" class="tab-content">
                <div class="dashboard-grid gauges-grid">
                    <div class="gauge-card glass-panel">
                        <h3>US-China Tension</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-china-tension"></canvas></div>
                        <div class="shap-explainer" id="shap-china-tension">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Index: <span id="val-china-tension">--</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Brazil Competition</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-brazil-comp"></canvas></div>
                        <div class="shap-explainer" id="shap-brazil-comp">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Vol: <span id="val-brazil-comp">--</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>EU Trade Volume</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-eu-trade"></canvas></div>
                        <div class="shap-explainer" id="shap-eu-trade">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Vol: <span id="val-eu-trade">--</span></div>
                    </div>
                </div>
            </section>

            <!-- Sentiment Tab -->
            <section id="sentiment" class="tab-content">
                <div class="dashboard-grid gauges-grid">
                    <div class="gauge-card glass-panel">
                        <h3>Overall Sentiment</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-sentiment-overall"></canvas></div>
                        <div class="shap-explainer" id="shap-sentiment-overall">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Score: <span id="val-sentiment-overall">--</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Source Credibility</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-source-cred"></canvas></div>
                        <div class="shap-explainer" id="shap-source-cred">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Rating: <span id="val-source-cred">--</span></div>
                    </div>
                    <div class="gauge-card glass-panel">
                        <h3>Trend (7 Day)</h3>
                        <div class="gauge-wrapper"><canvas id="gauge-sentiment-trend"></canvas></div>
                        <div class="shap-explainer" id="shap-sentiment-trend">
                            <span class="shap-label">SHAP Impact:</span>
                            <span class="shap-value neutral">0.00</span>
                        </div>
                        <div class="gauge-stat">Slope: <span id="val-sentiment-trend">--</span></div>
                    </div>
                </div>
                <div class="glass-panel full-width">
                    <h3>Latest News Analysis (NewsAPI)</h3>
                    <div id="news-list" class="data-list">
                        <div class="loading-spinner"><i class="fa-solid fa-circle-notch fa-spin"></i> Loading News...</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
